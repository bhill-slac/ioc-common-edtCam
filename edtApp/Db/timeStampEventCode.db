# Small stub to propagate beam event code to timeStampSource PV
# and provide canned setup sequences for common setups
# Required macros:
#	BEAM_EC		- PV to set beam timing event code
#	DEV			- Prefix for timeStampSource.db
#
#
record( dfanout, "$(CAM):EdtBeamEventCodeFanout" )
{
	field( DOL,  "$(CAM):EdtBeamEventCode CPP MS" )
    field( OMSL, "closed_loop")
    field( OUTA, "$(BEAM_EC) PP MS" )
    field( OUTB, "$(DEV):TSS_SETEC PP MS" )
}


record( seq, "$(CAM):GoTo120HzMode" )
{
	field( DOL1, "0" )
	field( LNK1, "$(CAM):Acquire PP NMS" )
	field( DLY1, "0.0" )

	field( DOL2, "40" )
	field( LNK2, "$(CAM):EdtCamEventCode PP NMS" )
	field( DLY2, "1.0" )

	field( DOL3, "140" )
	field( LNK3, "$(CAM):EdtBeamEventCode PP NMS" )
	field( DLY3, "0.0" )

	field( DOL4, "4.0e-3" )
	field( LNK4, "$(CAM):EdtCamTrigDelay PP NMS" )
	field( DLY4, "0.0" )

	field( DOL5, "4.3e-3" )
	field( LNK5, "$(CAM):AcquireTime PP NMS" )
	field( DLY5, "0.0" )

	field( DOL6, "840" )
	field( LNK6, "$(CAM):MinY PP NMS" )
	field( DLY6, "0.0" )

	field( DOL7, "1" )
	field( LNK7, "$(CAM):TriggerMode PP NMS" )
	field( DLY7, "0.0" )

	field( DOL8, "2" )
	field( LNK8, "$(CAM):ImageMode PP NMS" )
	field( DLY8, "0.0" )

	field( DOL9, "1" )
	field( LNK9, "$(CAM):Acquire PP NMS" )
	field( DLY9, "5.0" )
}


record( seq, "$(CAM):GoToFullMode" )
{
	field( DOL1, "0" )
	field( LNK1, "$(CAM):Acquire PP NMS" )
	field( DLY1, "0.0" )

	field( DOL2, "44" )
	field( LNK2, "$(CAM):EdtCamEventCode PP NMS" )
	field( DLY2, "1.0" )

	field( DOL3, "40" )
	field( LNK3, "$(CAM):EdtBeamEventCode PP NMS" )
	field( DLY3, "0.0" )

	field( DOL4, "4.1e-3" )
	field( LNK4, "$(CAM):EdtCamTrigDelay PP NMS" )
	field( DLY4, "0.0" )

	field( DOL5, "0.05" )
	field( LNK5, "$(CAM):AcquireTime PP NMS" )
	field( DLY5, "0.0" )

	field( DOL6, "0" )
	field( LNK6, "$(CAM):MinY PP NMS" )
	field( DLY6, "0.0" )

	field( DOL7, "1" )
	field( LNK7, "$(CAM):TriggerMode PP NMS" )
	field( DLY7, "0.0" )

	field( DOL8, "2" )
	field( LNK8, "$(CAM):ImageMode PP NMS" )
	field( DLY8, "0.0" )

	field( DOL9, "1" )
	field( LNK9, "$(CAM):Acquire PP NMS" )
	field( DLY9, "5.0" )
}

